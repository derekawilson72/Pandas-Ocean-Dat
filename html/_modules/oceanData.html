<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>oceanData &mdash; oceanData 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="oceanData 1.0 documentation" href="../index.html" />
    <link rel="up" title="Module code" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          oceanData</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../oceanData.html">OceanData Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rosePlot.html">Rose Plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cheatsheet.html">Sphinx cheat sheet</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <h1>Source code for oceanData</h1><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span>  <span class="n">Line2D</span> 

<span class="k">class</span> <span class="nc">oceanDataPlot</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    merge two datasets with intersecting (overlapping) date ranges.</span>
<div class="viewcode-block" id="oceanDataPlot"><a class="viewcode-back" href="../oceanData.html#oceanData.oceanDataPlot">[docs]</a><span class="sd">    Plot the data as a single dataset and export as a netcdf.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">fig</span><span class="o">=</span><span class="bp">None</span>
    <span class="n">axs</span><span class="o">=</span><span class="bp">None</span>

    <span class="n">WaveData</span><span class="o">=</span><span class="bp">None</span>
    <span class="n">WindData</span><span class="o">=</span><span class="bp">None</span>  
    <span class="n">rng1</span><span class="o">=</span><span class="bp">None</span>
    <span class="n">rng2</span><span class="o">=</span><span class="bp">None</span>
    <span class="n">exRng1</span><span class="o">=</span><span class="bp">None</span>

    <span class="n">rosePlotFig</span><span class="o">=</span><span class="bp">None</span>


    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setSampleData</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">setSampleData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;set two arbitrary date ranges with overlapping dates&quot;&quot;&quot;</span>

<div class="viewcode-block" id="oceanDataPlot.setSampleData"><a class="viewcode-back" href="../oceanData.html#oceanData.oceanDataPlot.setSampleData">[docs]</a>        <span class="n">rng1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s">&#39;1/1/2011&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&#39;1/10/2011&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;360S&#39;</span><span class="p">)</span>
        <span class="n">rng2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s">&#39;1/2/2011&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s">&#39;1/08/2011&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s">&#39;360S&#39;</span><span class="p">)</span>

        <span class="n">WaveData</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rng1</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">])</span>  <span class="c">##initialize wave dataset</span>
        <span class="n">WaveData</span><span class="p">[</span><span class="s">&#39;Wvht&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">WaveData</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">10</span>  <span class="c">##append values for column data</span>
        <span class="n">WaveData</span><span class="p">[</span><span class="s">&#39;Wvdr&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">WaveData</span><span class="p">),</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">WaveData</span><span class="o">=</span><span class="n">WaveData</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rng1</span><span class="o">=</span><span class="n">rng1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">WaveData</span><span class="o">=</span><span class="n">WaveData</span>
        
        <span class="n">WindData</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">rng2</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;date&#39;</span><span class="p">])</span>  <span class="c">##do the same for wind data </span>
        <span class="n">WindData</span><span class="p">[</span><span class="s">&#39;Wspd&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">WindData</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">5</span>
        <span class="n">WindData</span><span class="p">[</span><span class="s">&#39;Wndr&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">WindData</span><span class="p">),</span><span class="mi">1</span><span class="p">))</span>
        <span class="n">WindData</span><span class="o">=</span><span class="n">WindData</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rng2</span><span class="o">=</span><span class="n">rng2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">WindData</span><span class="o">=</span><span class="n">WindData</span>
        

    <span class="k">def</span> <span class="nf">intersectDates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        determine common date range between two datasets</span></div>
<div class="viewcode-block" id="oceanDataPlot.intersectDates"><a class="viewcode-back" href="../oceanData.html#oceanData.oceanDataPlot.intersectDates">[docs]</a><span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">idx1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rng1</span><span class="p">)</span>
        <span class="n">idx2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rng2</span><span class="p">)</span>
        <span class="n">cdx</span><span class="o">=</span><span class="n">idx1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">idx2</span><span class="p">)</span> <span class="c">#set to intersection</span>
        <span class="c">##set two DataFrames to commonData</span>
        <span class="n">commonData</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">WaveData</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cdx</span><span class="p">]</span>
        <span class="n">commonData</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">WindData</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">WindData</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cdx</span><span class="p">]</span>        
        <span class="bp">self</span><span class="o">.</span><span class="n">exRng1</span><span class="o">=</span><span class="p">((</span><span class="n">commonData</span><span class="p">[</span><span class="s">&#39;Wvht&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">commonData</span><span class="p">[</span><span class="s">&#39;Wspd&#39;</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">4</span><span class="p">))</span>  <span class="c">##determine intersecting extreme range</span>

    <span class="k">def</span> <span class="nf">plotDates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        plotDates()</span></div>
<div class="viewcode-block" id="oceanDataPlot.plotDates"><a class="viewcode-back" href="../oceanData.html#oceanData.oceanDataPlot.plotDates">[docs]</a>
<span class="sd">        plotting datasets of wind and wave data as well as the extreme</span>
<span class="sd">        events.  Uses Pandas inherent time series plotting tools.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        None. Uses class variables</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        out : fig</span>
<span class="sd">        A matplotlib figure object of the timeseries plot</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; self.plotDates()</span>
<span class="sd">        matplotlib fig</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c">##determine common date range between two datasets</span>
        <span class="n">idx1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rng1</span><span class="p">)</span>
        <span class="n">idx2</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rng2</span><span class="p">)</span>
        <span class="n">cdx</span><span class="o">=</span><span class="n">idx1</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">idx2</span><span class="p">)</span> <span class="c">#set to intersection</span>
        <span class="c">##set two DataFrames to commonData</span>
        <span class="n">commonData</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">WaveData</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cdx</span><span class="p">]</span>
        <span class="n">commonData</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">WindData</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">WindData</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">cdx</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">intersectDates</span><span class="p">()</span> <span class="c">##determine date intersection and analyze extremes.</span>
        <span class="n">exRng1</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exRng1</span>    <span class="c">##get the extreme wind and wave data</span>
        
        <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

        <span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>
        <span class="n">l1</span><span class="o">=</span><span class="n">commonData</span><span class="p">[</span><span class="s">&#39;Wvht&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s">&#39;WaveHeight&#39;</span> <span class="p">)</span>  <span class="c">##create timeseries of wave data</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;WvHt [m]&#39;</span><span class="p">)</span>

        <span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">)</span>
        <span class="n">l2</span><span class="o">=</span><span class="n">commonData</span><span class="p">[</span><span class="s">&#39;Wspd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s">&#39;WindSpeed&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s">&#39;green&#39;</span><span class="p">)</span>
        <span class="n">l2</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s">&#39;green&#39;</span><span class="p">)</span> <span class="c">##change color anytime</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Wspd [m/s]&#39;</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;date&#39;</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">top</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>

        <span class="n">redWave</span><span class="o">=</span><span class="n">Line2D</span><span class="p">(</span><span class="n">commonData</span><span class="p">[</span><span class="n">exRng1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span> <span class="p">,</span> <span class="n">commonData</span><span class="p">[</span><span class="n">exRng1</span><span class="p">][</span><span class="s">&#39;Wvht&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">&#39;o&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fillstyle</span><span class="o">=</span><span class="s">&#39;full&#39;</span><span class="p">)</span>  <span class="c">##times series points of the extreme wave heights</span>
        <span class="n">ax1</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">redWave</span><span class="p">)</span>

        <span class="n">redWind</span><span class="o">=</span><span class="n">Line2D</span><span class="p">(</span><span class="n">commonData</span><span class="p">[</span><span class="n">exRng1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span> <span class="p">,</span> <span class="n">commonData</span><span class="p">[</span><span class="n">exRng1</span><span class="p">][</span><span class="s">&#39;Wspd&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>  <span class="n">color</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s">&#39;o&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">fillstyle</span><span class="o">=</span><span class="s">&#39;full&#39;</span><span class="p">)</span> <span class="c">##times series points of the extreme wind speeds</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">redWind</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fig</span><span class="o">=</span><span class="n">fig</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axs</span><span class="o">=</span><span class="p">[</span><span class="n">ax1</span><span class="p">,</span><span class="n">ax2</span><span class="p">]</span>
        
        <span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;timeseries.png&#39;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">createWaveRose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a rose plot with the WaveData parameter in both magnitude and direction</span></div>
<div class="viewcode-block" id="oceanDataPlot.createWaveRose"><a class="viewcode-back" href="../oceanData.html#oceanData.oceanDataPlot.createWaveRose">[docs]</a><span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">magn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">WaveData</span><span class="o">.</span><span class="n">Wvht</span>
        <span class="n">dirs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">WaveData</span><span class="o">.</span><span class="n">Wvdr</span>
        <span class="n">fig</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rosePlot</span><span class="p">(</span><span class="n">magn</span><span class="p">,</span> <span class="n">dirs</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;WaveRose.png&#39;</span><span class="p">)</span>
        

    <span class="k">def</span> <span class="nf">createWindRose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a rose plot with the WindData parameter in both magnitude and direction</span></div>
<div class="viewcode-block" id="oceanDataPlot.createWindRose"><a class="viewcode-back" href="../oceanData.html#oceanData.oceanDataPlot.createWindRose">[docs]</a><span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">magn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">WindData</span><span class="o">.</span><span class="n">Wspd</span>
        <span class="n">dirs</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">WindData</span><span class="o">.</span><span class="n">Wndr</span>
        <span class="n">fig</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rosePlot</span><span class="p">(</span><span class="n">magn</span><span class="p">,</span> <span class="n">dirs</span><span class="p">)</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;WindRose.png&#39;</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">rosePlot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">magn</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">dirs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        rosePlot(magn, dirs)</span></div>
<div class="viewcode-block" id="oceanDataPlot.rosePlot"><a class="viewcode-back" href="../oceanData.html#oceanData.oceanDataPlot.rosePlot">[docs]</a><span class="sd">        </span>
<span class="sd">        generate a rose plot with the class values for WaveData or Winddata. A rose plot will display the magnitude and direction of both wind and waves.  The rose plots will appear as wedges in the direction of the wave or wind.  The magnitude of the wave or wind will appear as the diameter of the wedge and a cumulative distribution function will appear as color codes of the wedge.  </span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        magn:  array-like </span>
<span class="sd">        magnitude of wind or waves</span>
<span class="sd">        dirs:  array-like</span>
<span class="sd">        direction of wind or waves</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        out : fig</span>
<span class="sd">        A matplotlib figure object of the roseplot</span>

<span class="sd">        Examples</span>
<span class="sd">        --------</span>
<span class="sd">        &gt;&gt;&gt; self.rosePlot(self.WaveData.Wvht, self.WaveData.Wvdr)</span>
<span class="sd">        matplotlib fig</span>

<span class="sd">        &gt;&gt;&gt; self.rosePlot(self.WindData.Wnsp, self.WaveData.Wndr)</span>
<span class="sd">        matplotlib fig</span>

<span class="sd">        &gt;&gt;&gt; self.rosePlot()  ##return random dataset for testing</span>
<span class="sd">        matplotlib fig</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">N</span><span class="o">=</span><span class="mi">16</span>
        <span class="c">##load default random data if none provided</span>
        <span class="k">if</span> <span class="n">magn</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">magn</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dirs</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">dirs</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">magn</span><span class="p">),</span><span class="mi">1</span><span class="p">))</span>
        
        
        <span class="n">theta</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">N</span> <span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mf">16.0</span>  <span class="c">#divide circle into 16(N) sectors.</span>
        <span class="n">width</span><span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="n">N</span>  <span class="c">#np.pi /4.0 * np.random.rand(N)</span>
        <span class="n">bins</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span> <span class="c">##bin the radii</span>
        <span class="n">colors</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;red&#39;</span><span class="p">,</span> <span class="s">&#39;orange&#39;</span><span class="p">,</span> <span class="s">&#39;yellow&#39;</span><span class="p">,</span> <span class="s">&#39;green&#39;</span><span class="p">]</span><span class="c">##color codes for the radii with red the highest</span>
        <span class="n">theta_i</span><span class="o">=</span><span class="mf">0.0</span>

        <span class="n">fig</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

        <span class="c">##set the second axis as a colorbar of the bins </span>
        <span class="n">ax2</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">122</span><span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">bar</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],[</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.25</span><span class="p">],</span>
                <span class="n">width</span><span class="o">=.</span><span class="mi">8</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.75</span><span class="p">],</span>
                <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">)</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="s">&quot;0%&quot;</span><span class="p">,</span> <span class="s">&quot;25%&quot;</span><span class="p">,</span><span class="s">&quot;50%&quot;</span><span class="p">,</span> <span class="s">&quot;75%&quot;</span><span class="p">,</span><span class="s">&quot;100%&quot;</span><span class="p">])</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([])</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span>
        <span class="n">ax2</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="o">.</span><span class="mi">85</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mo">075</span><span class="p">,</span><span class="o">.</span><span class="mi">6</span><span class="p">])</span><span class="c">#set position and size of axis in left, bottom, width, height </span>

        <span class="c">##set the first axis as the polar plot or the rose plot</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">121</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="s">&#39;polar&#39;</span><span class="p">)</span>
        <span class="n">bars</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_theta_zero_location</span><span class="p">(</span><span class="s">&quot;N&quot;</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_theta_direction</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">d_theta</span><span class="o">=</span><span class="mf">360.0</span><span class="o">/</span><span class="n">N</span>
        <span class="k">for</span> <span class="n">theta_i</span> <span class="ow">in</span> <span class="n">theta</span><span class="p">:</span>
            <span class="n">theta_d</span><span class="o">=</span><span class="n">theta_i</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span>
            <span class="k">if</span> <span class="n">theta_d</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">idxs</span><span class="o">=</span><span class="p">(</span><span class="n">dirs</span><span class="o">&gt;=</span><span class="p">(</span><span class="mi">360</span><span class="o">+</span><span class="n">theta_d</span><span class="p">))</span> <span class="o">|</span> <span class="p">(</span><span class="n">dirs</span><span class="o">&lt;</span><span class="p">(</span><span class="n">theta_d</span><span class="o">+</span><span class="n">d_theta</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">idxs</span><span class="o">=</span><span class="p">(</span><span class="n">dirs</span><span class="o">&gt;=</span><span class="p">(</span><span class="n">theta_d</span><span class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">dirs</span><span class="o">&lt;</span><span class="p">(</span><span class="n">theta_d</span><span class="o">+</span><span class="n">d_theta</span><span class="p">))</span>
            <span class="n">wvs0</span><span class="o">=</span><span class="n">magn</span><span class="p">[</span><span class="n">idxs</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
            <span class="c">#wvs0=np.random.rand(100)*np.random.randint(1,100)</span>
            <span class="n">wvs0</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">inds</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">wvs0</span><span class="p">))</span>
            <span class="n">wv_bdys</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">inds</span><span class="p">,</span> <span class="n">wvs0</span><span class="p">,</span> <span class="n">left</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="n">bars_0</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">theta_i</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">bins</span><span class="p">)),</span> <span class="n">wv_bdys</span><span class="p">,</span>
                          <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
            <span class="n">bars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bars_0</span><span class="p">)</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_position</span><span class="p">([</span><span class="o">.</span><span class="mo">05</span><span class="p">,</span> <span class="o">.</span><span class="mi">1</span><span class="p">,</span> <span class="o">.</span><span class="mi">65</span><span class="p">,</span><span class="o">.</span><span class="mi">80</span><span class="p">])</span><span class="c">#set position and size of axis in left, bottom, width, height </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rosePlotFig</span><span class="o">=</span><span class="n">fig</span>
        <span class="k">return</span> <span class="n">fig</span>


<span class="k">if</span> <span class="n">__name__</span><span class="o">==</span><span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">odp1</span><span class="o">=</span><span class="n">oceanDataPlot</span><span class="p">()</span>
    <span class="n">odp1</span><span class="o">.</span><span class="n">intersectDates</span><span class="p">()</span></div></div>
    <span class="n">odp1</span><span class="o">.</span><span class="n">plotDates</span><span class="p">()</span>
    <span class="n">odp1</span><span class="o">.</span><span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="n">odp1</span><span class="o">.</span><span class="n">createWaveRose</span><span class="p">()</span>
    <span class="n">odp1</span><span class="o">.</span><span class="n">createWindRose</span><span class="p">()</span>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, DW.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>